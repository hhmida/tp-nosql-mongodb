<!doctype html><html lang=fr class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Atelier MongoDB"><meta name=author content="Hmida Hmida"><link rel=canonical href=https://hhmida.github.io/tp-nosql-mongodb/index.html><link rel=icon href=assets/images/leaf.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-7.3.6"><title>Bases de données NoSQL avec MongoDB</title><link rel=stylesheet href=assets/stylesheets/main.a57b2b03.min.css><link rel=stylesheet href=assets/stylesheets/palette.3f5d1f46.min.css><meta name=theme-color content=#2094f3><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style></head> <body dir=ltr data-md-color-scheme data-md-color-primary=blue data-md-color-accent=red> <script>function __prefix(e){return new URL(".",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#bases-de-donnees-nosql-avec-mongodb class=md-skip> Aller au contenu </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=En-tête> <a href=index.html title="Bases de données NoSQL avec MongoDB" class="md-header__button md-logo" aria-label="Bases de données NoSQL avec MongoDB" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Bases de données NoSQL avec MongoDB </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Introduction </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Rechercher placeholder=Rechercher autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Effacer tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initialisation de la recherche </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=index.html title="Bases de données NoSQL avec MongoDB" class="md-nav__button md-logo" aria-label="Bases de données NoSQL avec MongoDB" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"/></svg> </a> Bases de données NoSQL avec MongoDB </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Introduction <span class="md-nav__icon md-icon"></span> </label> <a href=index.html class="md-nav__link md-nav__link--active"> Introduction </a> <nav class="md-nav md-nav--secondary" aria-label="Table des matières"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table des matières </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#objectifs class=md-nav__link> Objectifs </a> </li> <li class=md-nav__item> <a href=#ressources class=md-nav__link> Ressources </a> </li> <li class=md-nav__item> <a href=#presentation-de-mongodb class=md-nav__link> Présentation de MongoDB </a> <nav class=md-nav aria-label="Présentation de MongoDB"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vocabulaire class=md-nav__link> Vocabulaire </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=installation.html class=md-nav__link> Installation et configuration </a> </li> <li class=md-nav__item> <a href=crud.html class=md-nav__link> Opérations de base </a> </li> <li class=md-nav__item> <a href=advanced.html class=md-nav__link> Opérations avancées </a> </li> <li class=md-nav__item> <a href=exercice.html class=md-nav__link> Exercices </a> </li> <li class=md-nav__item> <a href=replication.html class=md-nav__link> Replication </a> </li> <li class=md-nav__item> <a href=sharding.html class=md-nav__link> Sharding </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <p><img src=assets/images/MongoDB.png width=60% height=60%></p> <h1 id=bases-de-donnees-nosql-avec-mongodb>Bases de Données NoSQL avec MongoDB<a class=headerlink href=#bases-de-donnees-nosql-avec-mongodb title="Permanent link">&para;</a></h1> <hr> <h3 id=objectifs>Objectifs<a class=headerlink href=#objectifs title="Permanent link">&para;</a></h3> <ul> <li>Installer MongoDB et créer une base de données</li> <li>Interroger une base de données orientée document</li> <li>Protéger la base de données contre les pannes avec le <strong>ReplicaSet</strong></li> <li>Passer à l'échelle avec le <strong>Sharding</strong></li> </ul> <h3 id=ressources>Ressources<a class=headerlink href=#ressources title="Permanent link">&para;</a></h3> <p><strong>Outils</strong></p> <ul> <li>MongoDB Community Server <a href=https://fastdl.mongodb.org/windows/mongodb-windows-x86_64-4.4.1-signed.msi>V4.4.1</a> (Windows 10) ou <a href=https://fastdl.mongodb.org/win32/mongodb-win32-x86_64-2008plus-ssl-4.0.20-signed.msi>V4.0.2</a> (Windows 7 ou 8)</li> <li>MongoDB Shell <a href=https://downloads.mongodb.com/compass/mongosh-0.4.2-win32.zip>V0.4.2</a> (Exécuter des commandes intéractives)</li> <li>MongoCompass <a href=https://downloads.mongodb.com/compass/mongodb-compass-1.22.1-win32-x64.msi>V1.22.1</a> (GUI pour MongoDB)</li> </ul> <p><strong>Fichiers de données (datasets)</strong></p> <ul> <li><a href=https://s3-eu-west-1.amazonaws.com/course.oc-static.com/courses/4462426/restaurants.json_.zip>restaurants.json</a>: 25359 restaurants de New York</li> <li><a href=http://download.geonames.org/export/dump/cities15000.zip>cities.csv</a>: 15000 villes du monde</li> </ul> <p><strong>Sources et référence</strong></p> <ul> <li><a href=https://docs.mongodb.com/ >Documentation MongoDB</a></li> <li><a href=https://medium.com/@arun2pratap/set-up-mongodb-sharded-cluster-for-windows-with-just-a-double-click-6eedbb7b79e>Tutorial MongoDB Sharding sous Windows</a></li> <li><a href=https://openclassrooms.com/fr/courses/4462426-maitrisez-les-bases-de-donnees-nosql>Maîtrisez les bases de données NoSQL Openclassrooms</a></li> </ul> <h2 id=presentation-de-mongodb>Présentation de MongoDB<a class=headerlink href=#presentation-de-mongodb title="Permanent link">&para;</a></h2> <h3 id=vocabulaire>Vocabulaire<a class=headerlink href=#vocabulaire title="Permanent link">&para;</a></h3> <p>MongoDB est un système de gestion de bases de données NoSQL orienté documents. Il est parmi les SGBD les plus utilisés. <img src=assets/images/dbRanking.png></p> <p>Source : <a href=https://db-engines.com/en/ranking_trend>https://db-engines.com/en/ranking_trend</a></p> <p>Le document est l'unité de référence dans ce système. Elle est l'équivalent de tuple ou enregistrement dans les bases de données relationnelles.<br> MongoDB gère plusieurs <mark>bases de données</mark>. Chaque base est composée de <mark>Collections</mark> (équivalent de table). La struture d'un <mark>document</mark> MongoDB ressembée à celle de JSON. Le modèle est très simple :</p> <ul> <li>Tout est clé/valeur : "clé" : "valeur".</li> <li>Un document est encapsulé dans des accolades {...}, pouvant contenir des listes de clés/valeurs.</li> <li>Une valeur peut être un type scalaire (entier, nombre, texte, booléen, null), des listes de valeurs [...], ou des documents imbriqués.</li> </ul> <details class=info open=open><summary>Schéma de la base MongoDB</summary><p>MongoDB ne gère aucun schéma pour les collections. Donc pas de structure fixe ni de typage. Du coup, il est difficile lors de l’interrogation de connaître le contenu de la base de données. Le logiciel Compass permet de faire une analyse du schéma et fournit des statistiques sur les types des clés et les fréquences des valeurs.</p> </details> <details class=example open=open><summary>Exemple de document MongoDB</summary><p><div class=highlight><pre><span></span><code>  <span class=p>{</span>
    <span class=s2>&quot;_id&quot;</span><span class=o>:</span><span class=p>{</span>
      <span class=s2>&quot;$oid&quot;</span><span class=o>:</span><span class=s2>&quot;5f7cefe98c3d2e2bd862b3ff&quot;</span>
    <span class=p>},</span>
    <span class=s2>&quot;address&quot;</span><span class=o>:</span><span class=p>{</span>
      <span class=s2>&quot;building&quot;</span><span class=o>:</span><span class=s2>&quot;469&quot;</span><span class=p>,</span>
      <span class=s2>&quot;coord&quot;</span><span class=o>:</span><span class=p>{</span>
        <span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=s2>&quot;Point&quot;</span><span class=p>,</span>
        <span class=s2>&quot;coordinates&quot;</span><span class=o>:</span><span class=p>[</span><span class=o>-</span><span class=mf>73.961704</span><span class=p>,</span><span class=mf>40.662942</span><span class=p>]</span>
      <span class=p>},</span>
      <span class=s2>&quot;street&quot;</span><span class=o>:</span><span class=s2>&quot;Flatbush Avenue&quot;</span><span class=p>,</span>
      <span class=s2>&quot;zipcode&quot;</span><span class=o>:</span><span class=s2>&quot;11225&quot;</span>
    <span class=p>},</span>
    <span class=s2>&quot;borough&quot;</span><span class=o>:</span><span class=s2>&quot;Brooklyn&quot;</span><span class=p>,</span>
    <span class=s2>&quot;cuisine&quot;</span><span class=o>:</span><span class=s2>&quot;Hamburgers&quot;</span><span class=p>,</span>
    <span class=s2>&quot;grades&quot;</span><span class=o>:</span><span class=p>[</span>
      <span class=p>{</span><span class=s2>&quot;date&quot;</span><span class=o>:</span><span class=p>{</span><span class=s2>&quot;$date&quot;</span><span class=o>:</span><span class=s2>&quot;2014-12-30T00:00:00.000Z&quot;</span><span class=p>},</span><span class=s2>&quot;grade&quot;</span><span class=o>:</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;score&quot;</span><span class=o>:</span><span class=mf>8</span><span class=p>},</span>
      <span class=p>{</span><span class=s2>&quot;date&quot;</span><span class=o>:</span><span class=p>{</span><span class=s2>&quot;$date&quot;</span><span class=o>:</span><span class=s2>&quot;2014-07-01T00:00:00.000Z&quot;</span><span class=p>},</span><span class=s2>&quot;grade&quot;</span><span class=o>:</span><span class=s2>&quot;B&quot;</span><span class=p>,</span><span class=s2>&quot;score&quot;</span><span class=o>:</span><span class=mf>23</span><span class=p>},</span>
      <span class=p>{</span><span class=s2>&quot;date&quot;</span><span class=o>:</span><span class=p>{</span><span class=s2>&quot;$date&quot;</span><span class=o>:</span><span class=s2>&quot;2013-04-30T00:00:00.000Z&quot;</span><span class=p>},</span><span class=s2>&quot;grade&quot;</span><span class=o>:</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;score&quot;</span><span class=o>:</span><span class=mf>12</span><span class=p>},</span>
      <span class=p>{</span><span class=s2>&quot;date&quot;</span><span class=o>:</span><span class=p>{</span><span class=s2>&quot;$date&quot;</span><span class=o>:</span><span class=s2>&quot;2012-05-08T00:00:00.000Z&quot;</span><span class=p>},</span><span class=s2>&quot;grade&quot;</span><span class=o>:</span><span class=s2>&quot;A&quot;</span><span class=p>,</span><span class=s2>&quot;score&quot;</span><span class=o>:</span><span class=mf>12</span><span class=p>}</span>
    <span class=p>],</span>
    <span class=s2>&quot;name&quot;</span><span class=o>:</span><span class=s2>&quot;Wendy&#39;S&quot;</span><span class=p>,</span>
    <span class=s2>&quot;restaurant_id&quot;</span><span class=o>:</span><span class=s2>&quot;30112340&quot;</span>
  <span class=p>}</span>
</code></pre></div> Ce restaurant a un nom, un quartier (borough), le type de cuisine, une adresse (document imbriqué, avec coordonnées GPS, rue et code postale), et un ensemble de notes (tableaux de documents).</p> </details> <details class=danger open=open><summary>Note</summary><p>La clé <mark>"_id:"</mark> est l'identifiant du document. Si sa valeur n'est pas spécifiée implicitement lors de l'insertion, elle est automatiquement initialisée par MongoDB.</p> </details> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Retour en haut de la page </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label="Pied de page"> <a href=installation.html class="md-footer__link md-footer__link--next" aria-label="Suivant: Installation et configuration" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Suivant </span> Installation et configuration </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2021 - Dr. Hmida Hmida </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://gitlab.com/hhmida target=_blank rel=noopener title=gitlab.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M105.2 24.9c-3.1-8.9-15.7-8.9-18.9 0L29.8 199.7h132c-.1 0-56.6-174.8-56.6-174.8zM.9 287.7c-2.6 8 .3 16.9 7.1 22l247.9 184-226.2-294zm160.8-88 94.3 294 94.3-294zm349.4 88-28.8-88-226.3 294 247.9-184c6.9-5.1 9.7-14 7.2-22zM425.7 24.9c-3.1-8.9-15.7-8.9-18.9 0l-56.6 174.8h132z"/></svg> </a> <a href=https://github.com/hhmida target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://linkedin.com/in/hhmida target=_blank rel=noopener title=linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["navigation.instant", "navigation.top", "navigation.sections", "toc.integrate"], "translations": {"clipboard.copy": "Copier dans le presse-papier", "clipboard.copied": "Copi\u00e9 dans le presse-papier", "search.config.lang": "fr", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Rechercher", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.term.missing": "Non trouv\u00e9", "select.version.title": "S\u00e9lectionner la version"}, "search": "assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script> <script src=assets/javascripts/bundle.b1047164.min.js></script> </body> </html>